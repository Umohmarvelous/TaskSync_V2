{"_id":"load-esm","_rev":"4-9afb4e4cec05855097c0a37c13101643","name":"load-esm","dist-tags":{"latest":"1.0.2"},"versions":{"0.1.0":{"name":"load-esm","version":"0.1.0","keywords":["load-esm","ESM","CommonJS","TypeScript","Node.js","dynamic import","JavaScript modules","module interoperability","mixed-module environment"],"author":{"url":"https://github.com/Borewit","name":"Borewit"},"license":"MIT","_id":"load-esm@0.1.0","maintainers":[{"name":"borewit","email":"borewit@xs4all.nl"}],"homepage":"https://github.com/Borewit/load-esm#readme","bugs":{"url":"https://github.com/Borewit/load-esm/issues"},"dist":{"shasum":"f4901c37d51fdb93618977fb83ae2a9acd5cfdbc","tarball":"https://registry.npmjs.org/load-esm/-/load-esm-0.1.0.tgz","fileCount":5,"integrity":"sha512-9wBLOJHfeAXEHUbp7OqU5N3kqaLYnIwuW9GXH3mpvUDYL+3aO/WFUNLmS+sqsdt/B9IF1j+Z4YI6VwfEQs7wRA==","signatures":[{"sig":"MEQCIEjRISC+LexmhykjChzKvz0iH5NTe1XV4VZ+HGi3bCWUAiAmTv6ig4ayaD2rWDWUSjHwxj6gcDeTDJz0vFUiaEsQfw==","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}],"unpackedSize":4426},"main":"index.cjs","types":"index.d.ts","engines":{"node":">=13.2.0"},"funding":[{"url":"https://github.com/sponsors/Borewit","type":"github"},{"url":"https://buymeacoffee.com/borewit","type":"buymeacoffee"}],"gitHead":"029f62d5d9af00bbb4ad916e7af6b4e9d6c2c32e","_npmUser":{"name":"borewit","email":"borewit@xs4all.nl"},"repository":{"url":"git+https://github.com/Borewit/load-esm.git","type":"git"},"_npmVersion":"10.9.0","description":"Utility to dynamically load ESM modules in TypeScript CommonJS projects","directories":{},"_nodeVersion":"22.11.0","dependencies":{},"_hasShrinkwrap":false,"_npmOperationalInternal":{"tmp":"tmp/load-esm_0.1.0_1733740115304_0.32793554409017633","host":"s3://npm-registry-packages-npm-production"}},"0.1.1":{"name":"load-esm","version":"0.1.1","keywords":["load-esm","ESM","Import ESM","CommonJS","TypeScript","Node.js","dynamic import","dynamic load"],"author":{"url":"https://github.com/Borewit","name":"Borewit"},"license":"MIT","_id":"load-esm@0.1.1","maintainers":[{"name":"borewit","email":"borewit@xs4all.nl"}],"homepage":"https://github.com/Borewit/load-esm#readme","bugs":{"url":"https://github.com/Borewit/load-esm/issues"},"dist":{"shasum":"af494802317907a1348379761370950e19e4877a","tarball":"https://registry.npmjs.org/load-esm/-/load-esm-0.1.1.tgz","fileCount":5,"integrity":"sha512-/rPzWSnSSdFQgBC8JB6EsaJJjuGJBaBBVz936z5IEznL/XE1W0r95mpPoaNTG4+LotnjLLUhqXTUNhPHiuuOEQ==","signatures":[{"sig":"MEUCIQD6KzCSJ/T9QJ6DmEzBR6F4HrgWug5wSKsH8v8XxUHSDwIgLwCyrQ62n5gl5YWxPjYrV7xnS8qmcRQRrAivvRIffrA=","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}],"unpackedSize":4806},"main":"index.cjs","types":"index.d.ts","engines":{"node":">=13.2.0"},"funding":[{"url":"https://github.com/sponsors/Borewit","type":"github"},{"url":"https://buymeacoffee.com/borewit","type":"buymeacoffee"}],"gitHead":"3c46d9ecb8dbbded6a7c7e1519064e4ba244c396","_npmUser":{"name":"borewit","email":"borewit@xs4all.nl"},"repository":{"url":"git+https://github.com/Borewit/load-esm.git","type":"git"},"_npmVersion":"10.9.0","description":"Utility to dynamically load ESM modules in TypeScript CommonJS projects","directories":{},"_nodeVersion":"22.11.0","dependencies":{},"_hasShrinkwrap":false,"_npmOperationalInternal":{"tmp":"tmp/load-esm_0.1.1_1733909474634_0.03204671686588534","host":"s3://npm-registry-packages-npm-production"}},"1.0.0":{"name":"load-esm","version":"1.0.0","keywords":["load-esm","ESM","Import ESM","CommonJS","TypeScript","Node.js","dynamic import","dynamic load","JavaScript modules","module interoperability","mixed-module environment","ERR_PACKAGE_PATH_NOT_EXPORTED","No \"exports\" main defined in"],"author":{"url":"https://github.com/Borewit","name":"Borewit"},"license":"MIT","_id":"load-esm@1.0.0","maintainers":[{"name":"borewit","email":"borewit@xs4all.nl"}],"homepage":"https://github.com/Borewit/load-esm#readme","bugs":{"url":"https://github.com/Borewit/load-esm/issues"},"dist":{"shasum":"ffeab57f68539a4e362d0015f52ef171b59174c2","tarball":"https://registry.npmjs.org/load-esm/-/load-esm-1.0.0.tgz","fileCount":5,"integrity":"sha512-jD4w34DxugmOEVX+c0/mtoxMyrrDX+FrI8hvDfrOi4hmXGSBq6Qe7399d5vxaWHzX4xFN9JIIsam0uOAjJuIGg==","signatures":[{"sig":"MEQCIGMq69R81g5ImkbhRYrH0+PEu24IAKLo1/6rRQCriYo7AiB/L0Tszg+X4iD79ce2vUMLlQXjsSZ6IUozhh+4VQyxFA==","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}],"unpackedSize":5220},"main":"index.cjs","types":"index.d.ts","engines":{"node":">=13.2.0"},"funding":[{"url":"https://github.com/sponsors/Borewit","type":"github"},{"url":"https://buymeacoffee.com/borewit","type":"buymeacoffee"}],"gitHead":"3bc88296b4ce9a9a8c8cc5096998ded03da6f177","_npmUser":{"name":"borewit","email":"borewit@xs4all.nl"},"repository":{"url":"git+https://github.com/Borewit/load-esm.git","type":"git"},"_npmVersion":"10.8.2","description":"Utility to dynamically load ESM modules in TypeScript CommonJS projects","directories":{},"_nodeVersion":"20.17.0","dependencies":{},"_hasShrinkwrap":false,"_npmOperationalInternal":{"tmp":"tmp/load-esm_1.0.0_1734051136752_0.49276990677455634","host":"s3://npm-registry-packages-npm-production"}},"1.0.1":{"name":"load-esm","version":"1.0.1","keywords":["load-esm","ESM","Import ESM","CommonJS","TypeScript","Node.js","dynamic import","dynamic load","JavaScript modules","module interoperability","mixed-module environment","ERR_PACKAGE_PATH_NOT_EXPORTED","No \"exports\" main defined in"],"author":{"url":"https://github.com/Borewit","name":"Borewit"},"license":"MIT","_id":"load-esm@1.0.1","maintainers":[{"name":"borewit","email":"borewit@xs4all.nl"}],"homepage":"https://github.com/Borewit/load-esm#readme","bugs":{"url":"https://github.com/Borewit/load-esm/issues"},"dist":{"shasum":"6ccd70a736e4a4d6296d488c365bd6afdf93b756","tarball":"https://registry.npmjs.org/load-esm/-/load-esm-1.0.1.tgz","fileCount":5,"integrity":"sha512-wPOn7uGcpwq+Wu+iLKpqja3YCZEodF/wLp3puLZ3pzdh4QIOaMOXDHA3poPV1xvYFSy54QN3QKgHmwPD+iCcDQ==","signatures":[{"sig":"MEUCIFmg9BUsc4+x9MtHOZQ+L7YnmmylZJoEAz5ukUf1N/OhAiEA/W4x1nBjtCq5gBVbQVB6oan8Apza8UqlZSf8r4lRGQA=","keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA"}],"unpackedSize":5676},"main":"index.js","types":"index.d.ts","engines":{"node":">=13.2.0"},"funding":[{"url":"https://github.com/sponsors/Borewit","type":"github"},{"url":"https://buymeacoffee.com/borewit","type":"buymeacoffee"}],"gitHead":"4251f22aa4a3ee7a640d731a4a6c302ffadd970e","scripts":{"test":"mocha","compile-test":"tsc -p test"},"_npmUser":{"name":"borewit","email":"borewit@xs4all.nl"},"repository":{"url":"git+https://github.com/Borewit/load-esm.git","type":"git"},"_npmVersion":"10.8.2","description":"Utility to dynamically load ESM modules in TypeScript CommonJS projects","directories":{},"_nodeVersion":"20.17.0","_hasShrinkwrap":false,"devDependencies":{"chai":"^4.3.4","mocha":"^11.0.1","typescript":"^5.7.2","@types/chai":"^5.0.1","@types/node":"^22.10.2","@types/mocha":"^10.0.10"},"_npmOperationalInternal":{"tmp":"tmp/load-esm_1.0.1_1734555996119_0.8680346294276402","host":"s3://npm-registry-packages-npm-production"}},"1.0.2":{"name":"load-esm","version":"1.0.2","main":"index.js","types":"index.d.ts","scripts":{"test":"mocha","compile-test":"tsc -p test"},"author":{"name":"Borewit","url":"https://github.com/Borewit"},"funding":[{"type":"github","url":"https://github.com/sponsors/Borewit"},{"type":"buymeacoffee","url":"https://buymeacoffee.com/borewit"}],"license":"MIT","description":"Utility to dynamically load ESM modules in TypeScript CommonJS projects","repository":{"type":"git","url":"git+https://github.com/Borewit/load-esm.git"},"bugs":{"url":"https://github.com/Borewit/load-esm/issues"},"homepage":"https://github.com/Borewit/load-esm#readme","keywords":["load-esm","ESM","Import ESM","CommonJS","TypeScript","Node.js","dynamic import","dynamic load","JavaScript modules","module interoperability","mixed-module environment","ERR_REQUIRE_ESM","require() of ES Module","ERR_PACKAGE_PATH_NOT_EXPORTED","No \"exports\" main defined in"],"engines":{"node":">=13.2.0"},"devDependencies":{"@types/chai":"^5.0.1","@types/mocha":"^10.0.10","@types/node":"^22.10.2","chai":"^4.3.4","mocha":"^11.0.1","typescript":"^5.7.2"},"_id":"load-esm@1.0.2","gitHead":"27696a447e06f827981df3383292be047d6b4faf","_nodeVersion":"22.13.0","_npmVersion":"10.9.2","dist":{"integrity":"sha512-nVAvWk/jeyrWyXEAs84mpQCYccxRqgKY4OznLuJhJCa0XsPSfdOIr2zvBZEj3IHEHbX97jjscKRRV539bW0Gpw==","shasum":"35dbac8a1a3abdb802cf236008048fcc8a9289a6","tarball":"https://registry.npmjs.org/load-esm/-/load-esm-1.0.2.tgz","fileCount":5,"unpackedSize":5929,"signatures":[{"keyid":"SHA256:DhQ8wR5APBvFHLF/+Tc+AYvPOdTpcIDqOhxsBHRwC7U","sig":"MEQCIH04XaqOiaoLxa+MfcRj0tIzihgAQbvINN+QpY791iFTAiAWoKs6mPcN3jUV9n4kmDUOZMUQL69Muvh+A3HA5aYWhQ=="}]},"_npmUser":{"name":"borewit","email":"borewit@xs4all.nl"},"directories":{},"maintainers":[{"name":"borewit","email":"borewit@xs4all.nl"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages-npm-production","tmp":"tmp/load-esm_1.0.2_1740737002094_0.26789791825024767"},"_hasShrinkwrap":false}},"time":{"created":"2024-12-09T10:28:35.231Z","modified":"2025-02-28T10:03:22.472Z","0.1.0":"2024-12-09T10:28:35.469Z","0.1.1":"2024-12-11T09:31:14.798Z","1.0.0":"2024-12-13T00:52:17.050Z","1.0.1":"2024-12-18T21:06:36.359Z","1.0.2":"2025-02-28T10:03:22.298Z"},"bugs":{"url":"https://github.com/Borewit/load-esm/issues"},"author":{"name":"Borewit","url":"https://github.com/Borewit"},"license":"MIT","homepage":"https://github.com/Borewit/load-esm#readme","keywords":["load-esm","ESM","Import ESM","CommonJS","TypeScript","Node.js","dynamic import","dynamic load","JavaScript modules","module interoperability","mixed-module environment","ERR_REQUIRE_ESM","require() of ES Module","ERR_PACKAGE_PATH_NOT_EXPORTED","No \"exports\" main defined in"],"repository":{"type":"git","url":"git+https://github.com/Borewit/load-esm.git"},"description":"Utility to dynamically load ESM modules in TypeScript CommonJS projects","maintainers":[{"name":"borewit","email":"borewit@xs4all.nl"}],"readme":"[![Node.js CI](https://github.com/Borewit/load-esm/actions/workflows/nodejs-ci.yml/badge.svg)](https://github.com/Borewit/load-esm/actions/workflows/nodejs-ci.yml)\n[![NPM version](https://img.shields.io/npm/v/load-esm.svg)](https://npmjs.org/package/load-esm)\n\n# load-esm\n\n***load-esm*** is a utility for dynamically importing pure ESM (ECMAScript Module) packages in CommonJS TypeScript projects.\n\nThis may resolve the following errors:\n- `Error [ERR_REQUIRE_ESM]: require() of ES Module`\n- `Error [ERR_PACKAGE_PATH_NOT_EXPORTED]: No \"exports\" main defined in...`\n\n## Installation\n```bash\nnpm install load-esm\n```\n\nor\n\n```bash\nyarn add load-esm\n```\n\n## Usage\n\nHere’s a conceptual example demonstrating how to use load-esm to dynamically load an ESM module in a CommonJS project:\n\n```ts\nimport {loadEsm} from 'load-esm';\n\n(async () => {\n  const esmModule = await loadEsm('esm-module');\n})();\n```\n\nTo import the typings you need do the following:\n```ts\nimport {loadEsm} from 'load-esm';\n(async () => {\nconst esmModule = await loadEsm<typeof import('esm-module')>('esm-module');\n})();\n```\n\nA concrete example loading [file-typ](https://github.com/sindresorhus/file-type), a pure ESM package:\n\n```ts\nimport {loadEsm} from 'load-esm';\n\n/**\n * Import 'file-type' ES-Module in CommonJS Node.js module\n */\n(async () => {\n    try {\n        // Dynamically import the ESM module, including types\n        const { fileTypeFromFile } = await loadEsm<typeof import('file-type')>('file-type');\n\n        // Use the imported function\n        const type = await fileTypeFromFile('fixture.gif');\n        console.log(type);\n    } catch (error) {\n        console.error('Error importing module:', error);\n    }\n})();\n```\n\n## API\n\n```ts\nloadEsm<T = any>(name: string): Promise<T>\n```\nDynamically imports an ESM module.\n\n#### Parameters\n- `name` (string): The name or path of the module to load.\n\n#### Returns\n- A `Promise<T>` that resolves to the imported module object.\n\n## How It Works\nUsing `await import` in a CommonJS TypeScript project poses challenges because the TypeScript compiler transpiles `import()` statements to `require()` calls when module is set to CommonJS in `tsconfig.json`.\nThis behavior conflicts with the dynamic nature of `import()` used for ESM.\n\nWorkarounds, such as wrapping the `import()` statement within `eval()` or similar constructs, can prevent TypeScript from transpiling it, but these approaches are clunky and error-prone.\n\nSince Node version 22.12.0 [require is able to load some ESM](https://joyeecheung.github.io/blog/2024/03/18/require-esm-in-node-js/), \nalthough with [some constraints](https://nodejs.org/api/modules.html#loading-ecmascript-modules-using-require).\nIf that works for you, you may longer need to module.\n\nThe utility of [load-esm](https://github.com/Borewit/load-esm) bypasses the TypeScript compiler by executing the `import()` outside the compilation scope. \nBy doing so, it maintains the intended behavior of `import()` for loading ESM modules dynamically, \nproviding a clean and effective solution for such scenarios.\n\n## Compatibility\n- Node.js: Requires Node.js 13.2.0 or later, as import() is only supported in these versions and beyond.\n- TypeScript: Fully typed and compatible with TypeScript.\n\n## License\n[MIT](./LICENSE)\n","readmeFilename":"README.md"}